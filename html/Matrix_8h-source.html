<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Matrix.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>Matrix.h</h1><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef __MATRIX_H__</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define __MATRIX_H__</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include &lt;cstdlib&gt;</span>
00005 <span class="preprocessor">#include &lt;vector&gt;</span>
00006 
00007 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00008 
00010 <span class="comment">// MATRIX CLASS DECLARATION BEGIN</span>
00011 
00012 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T = <span class="keywordtype">double</span>&gt;
00013 <span class="keyword">class </span>Matrix
00014 {
00015 <span class="keyword">private</span>:
00016         <span class="comment">//vector&lt;T&gt; matrix;</span>
00017         T *matrix;
00018         <span class="keywordtype">int</span> rows,columns;
00019 <span class="keyword">public</span>:
00020         Matrix(<span class="keywordtype">int</span> r,<span class="keywordtype">int</span> c);
00021         Matrix(<span class="keyword">const</span> Matrix&amp;);
00022         ~Matrix();
00023 
00024         T&amp; getElement(<span class="keywordtype">int</span> row,<span class="keywordtype">int</span> col);
00025         T getElement(<span class="keywordtype">int</span> row,<span class="keywordtype">int</span> col) <span class="keyword">const</span>;
00026         <span class="keywordtype">void</span> setElement(<span class="keywordtype">int</span> row,<span class="keywordtype">int</span> col,T);
00027         <span class="keywordtype">void</span> setElement(<span class="keywordtype">int</span> row,<span class="keywordtype">int</span> col,T) <span class="keyword">const</span>;
00028         <span class="keywordtype">int</span> getRows();
00029         <span class="keywordtype">int</span> getColumns();
00030         <span class="keywordtype">bool</span> isElementPresent(T value);
00031 
00032         Matrix getTranspose();
00033         Matrix getInverse();
00034         <span class="keywordtype">void</span> operator=(<span class="keyword">const</span> Matrix&amp;);
00035         Matrix* operator+(<span class="keyword">const</span> Matrix&amp;) <span class="keyword">const</span>;
00036         Matrix* operator*(<span class="keyword">const</span> Matrix&amp;) <span class="keyword">const</span>;
00037         T&amp; operator()(<span class="keywordtype">int</span> i,<span class="keywordtype">int</span> j);
00038 
00039         <span class="keywordtype">void</span> LoadIdentityMatrix();
00040         <span class="keywordtype">void</span> LoadNullMatrix();
00041         <span class="keywordtype">void</span> Power(<span class="keywordtype">double</span>);
00042         <span class="keywordtype">void</span> PrintElements();
00043 };
00044 
00045 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
00046 Matrix&lt;T&gt;* Multiply (Matrix&lt;T&gt;* m1, Matrix&lt;T&gt;* m2);
00047 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
00048 Matrix&lt;T&gt;* Add (Matrix&lt;T&gt;* m1, Matrix&lt;T&gt;* m2);
00049 
00050 <span class="comment">// MATRIX CLASS DECLARATION END</span>
00052 <span class="comment"></span>
00053 
00054 
00055 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00056 Matrix&lt;T&gt;::Matrix&lt;T&gt;( <span class="keywordtype">int</span> r, <span class="keywordtype">int</span> c)<span class="comment">//:matrix(r*c)</span>
00057 {
00058         rows=r;
00059         columns=c;
00060 
00061         <span class="keywordflow">try</span> {
00062                 matrix = <span class="keyword">new</span> T[r*c];
00063         } <span class="keywordflow">catch</span> (bad_alloc) {
00064                 cerr &lt;&lt; <span class="stringliteral">"Memory allocation error.\n"</span>;
00065                 exit (1);
00066         }
00067         
00068         LoadNullMatrix();
00069 }
00070 
00071 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00072 Matrix&lt;T&gt;::Matrix&lt;T&gt;(<span class="keyword">const</span> Matrix&lt;T&gt;&amp; m):matrix(m.r*m.c)
00073 {
00074         rows=m.rows;
00075         columns=m.columns;
00076         <span class="comment">//matrix.insert(matrix.begin(), m.matrix.begin(), m.matrix.end());</span>
00077         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; rows*columns; i++)
00078                 matrix[i] = m.matrix[i];
00079 
00080         cout &lt;&lt; "init";
00081 }
00082 
00083 template &lt;class T&gt;
00084 Matrix&lt;T&gt;::~Matrix&lt;T&gt;()
00085 {
00086         DBG_MSG(<span class="stringliteral">"destructor"</span>);
00087         <span class="keyword">delete</span>[] matrix;
00088         <span class="comment">//matrix.clear();</span>
00089 }
00090 
00091 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00092 T&amp; Matrix&lt;T&gt;::getElement(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)
00093 {
00094         <span class="keywordflow">if</span> (i &lt; rows &amp;&amp; j &lt; columns)
00095                 return matrix[i*columns + j];
00096         else {
00097                 cerr &lt;&lt; <span class="stringliteral">"Index out of bounds.\n"</span>;
00098                 exit (1);
00099         }
00100 }
00101 
00102 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00103 <span class="keywordtype">void</span> Matrix&lt;T&gt;::setElement(<span class="keywordtype">int</span> i,<span class="keywordtype">int</span> j,T value)
00104 {       
00105         <span class="keywordflow">if</span> (i &lt; rows &amp;&amp; j &lt; columns)
00106                 matrix[i*columns + j] = value;
00107         else {
00108                 cerr &lt;&lt; <span class="stringliteral">"Index out of bounds.\n"</span>;
00109                 exit (1);
00110         }
00111 }
00112 
00113 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00114 T Matrix&lt;T&gt;::getElement(<span class="keywordtype">int</span> i,<span class="keywordtype">int</span> j)<span class="keyword"> const</span>
00115 <span class="keyword"></span>{
00116         <span class="keywordflow">if</span> (i &lt; rows &amp;&amp; j &lt; columns)
00117                 return matrix[i*columns + j];
00118         else {
00119                 cerr &lt;&lt; <span class="stringliteral">"Index out of bounds.\n"</span>;
00120                 exit (1);
00121         }
00122 }
00123 
00124 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00125 <span class="keywordtype">void</span> Matrix&lt;T&gt;::setElement(<span class="keywordtype">int</span> i,<span class="keywordtype">int</span> j,T value)<span class="keyword"> const</span>
00126 <span class="keyword"></span>{               
00127         <span class="keywordflow">if</span> (i &lt; rows &amp;&amp; j &lt; columns)
00128                 matrix[i*columns + j] = value;
00129         else {
00130                 cerr &lt;&lt; <span class="stringliteral">"Index out of bounds.\n"</span>;
00131                 exit (1);
00132         }
00133 }
00134 
00135 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00136 <span class="keywordtype">int</span> Matrix&lt;T&gt;::getRows()
00137 {
00138         <span class="keywordflow">return</span> rows;
00139 }
00140 
00141 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00142 <span class="keywordtype">int</span> Matrix&lt;T&gt;::getColumns()
00143 {
00144         <span class="keywordflow">return</span> columns;
00145 }
00146 
00147 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
00148 <span class="keywordtype">bool</span> Matrix&lt;T&gt;::isElementPresent(T value)
00149 {
00150         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0 ; i &lt; rows ; i++)
00151         {
00152                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0 ; j &lt; columns ; j++)
00153                 {
00154                         <span class="keywordflow">if</span>(value == getElement (i,j))
00155                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00156                 }
00157         }
00158         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00159 }
00160 
00161 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00162 Matrix&lt;T&gt; Matrix&lt;T&gt;::getTranspose()
00163 {
00164         Matrix&lt;T&gt; *resultant = <span class="keyword">new</span> Matrix&lt;T&gt;(columns,rows);
00165         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;rows;i++)
00166         {
00167                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;columns;j++)
00168                 {
00169                         resultant-&gt;setElement(j,i,getElement(i,j));
00170                 }
00171         }
00172         <span class="keywordflow">return</span> *resultant;
00173 }
00174 
00175 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00176 Matrix&lt;T&gt; Matrix&lt;T&gt;::getInverse()
00177 {
00178         Matrix&lt;T&gt; *resultant(rows,columns);
00179         <span class="keywordflow">return</span> *resultant;
00180 }
00181 
00182 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00183 <span class="keywordtype">void</span> Matrix&lt;T&gt;::operator=(<span class="keyword">const</span> Matrix&lt;T&gt;&amp; m1)
00184 {
00185         <span class="keywordflow">if</span>(rows == m1.rows &amp;&amp; columns == m1.columns)
00186         {
00187                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;m1.rows;i++)
00188                 {
00189                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;m1.columns;j++)
00190                         {
00191                                 setElement(i,j,m1.getElement(i,j));
00192                         }
00193                 }       
00194         }
00195 }
00196 
00197 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00198 Matrix&lt;T&gt;* Matrix&lt;T&gt;::operator+(<span class="keyword">const</span> Matrix&lt;T&gt;&amp; m)<span class="keyword"> const</span>
00199 <span class="keyword"></span>{
00200         Matrix&lt;T&gt; *res = <span class="keyword">new</span> Matrix&lt;T&gt; ( rows, columns);
00201         <span class="keywordflow">if</span>((rows == m.rows) &amp;&amp; (columns == m.columns))
00202         {
00203                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; rows; i++)
00204                 {
00205                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; columns; j++)
00206                         {
00207                                 res-&gt;setElement( i, j, getElement(i,j) + 
00208                                         m.getElement(i,j));
00209                         }
00210                 }
00211         }
00212         <span class="keywordflow">else</span>
00213         {
00214                 cerr &lt;&lt; <span class="stringliteral">"ERROR: Addition of two unequal size matrices."</span> &lt;&lt; endl;
00215                 exit (1);
00216         }
00217 
00218         <span class="keywordflow">return</span> res;
00219 }
00220 
00221 <span class="comment">//      Multiply Function</span>
00222 
00223 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00224 Matrix&lt;T&gt;* Matrix&lt;T&gt;::operator*(<span class="keyword">const</span> Matrix&lt;T&gt;&amp; m)<span class="keyword"> const</span>
00225 <span class="keyword"></span>{
00226         Matrix&lt;T&gt; *res = <span class="keyword">new</span> Matrix&lt;T&gt;(rows,m.columns);
00227         <span class="keywordflow">if</span>(columns==m.rows)
00228         {
00229                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;rows;i++)
00230                 {
00231                         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;m.columns;j++)
00232                         {
00233                                 res-&gt;setElement(i,j,0);
00234                                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k=0;k&lt;columns;k++)
00235                                 {
00236                                         res-&gt;setElement(i,j,res-&gt;getElement(i,j) + 
00237                                                         (getElement(i,k))*(m.getElement(k,j)));
00238                                 }
00239                         }
00240                 }
00241         }
00242         <span class="keywordflow">else</span>
00243                 res-&gt;LoadIdentityMatrix();
00244         <span class="comment">//printElements ();</span>
00245         <span class="keywordflow">return</span> res;
00246 }
00247 
00248 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt;
00249 T&amp; Matrix&lt;T&gt;::operator()(<span class="keywordtype">int</span> i,<span class="keywordtype">int</span> j)
00250 {
00251         <span class="keywordflow">return</span> getElement(i,j);
00252 }
00253 
00254 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00255 <span class="keywordtype">void</span> Matrix&lt;T&gt;::LoadIdentityMatrix()
00256 {
00257         LoadNullMatrix();
00258         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;rows;i++)
00259         {
00260                 setElement(i,i,T(1.0));
00261         }
00262 }
00263 
00264 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00265 <span class="keywordtype">void</span> Matrix&lt;T&gt;::LoadNullMatrix()
00266 {
00267         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;rows;i++)
00268                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;columns;j++)
00269                         setElement(i,j,T());
00270 }
00271 
00272 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00273 <span class="keywordtype">void</span> Matrix&lt;T&gt;::Power(<span class="keywordtype">double</span> power)
00274 {
00275         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;rows;i++)
00276         {
00277                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;columns;j++)
00278                 {
00279                         setElement(i,j,pow(getElement(i,j),power));
00280                 }
00281         }
00282 }
00283 
00284 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00285 <span class="keywordtype">void</span> Matrix&lt;T&gt;::PrintElements()
00286 {
00287         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;rows;i++)
00288         {
00289                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j=0;j&lt;columns;j++)
00290                         cout &lt;&lt; getElement(i,j) &lt;&lt; <span class="stringliteral">"\t"</span>;
00291                 cout &lt;&lt; endl;
00292         }
00293 }
00294 
00295 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00296 Matrix&lt;T&gt;* Multiply (Matrix&lt;T&gt;* m1, Matrix&lt;T&gt;* m2)
00297 {
00298         <span class="keywordflow">return</span> ((*m1)*(*m2));
00299 }
00300 
00301 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
00302 Matrix&lt;T&gt;* Add (Matrix&lt;T&gt;* m1, Matrix&lt;T&gt;* m2)
00303 {
00304         <span class="keywordflow">return</span> ((*m1)+(*m2));
00305 }
00306 
00307 
00308 <span class="preprocessor">#endif </span><span class="comment">/* __MATRIX_H__ */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Mar 8 20:45:05 2006 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
